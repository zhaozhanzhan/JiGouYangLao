<nz-card nzTitle="入院登记详情" [nzExtra]="extraTemplate">
    <nz-tabset nzSize="large" [(nzSelectedIndex)]="tabIndex" (nzSelectedIndexChange)="onSelectedIndexChange($event)">
        <nz-tab nzTitle="个人信息">
            <div>
                <nz-card nzType="inner" nzTitle="托养人" class="marginBottom24" [nzLoading]="isPersonCardLoading">
                    <form nz-form [formGroup]="validateForm">
                        <div nz-row [nzGutter]="24">
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzRequired nzFor="name">姓名</nz-form-label>
                                    <nz-form-control [nzSm]="16">
                                        <!-- <nz-input-group nzSearch [nzSuffix]="suffixIconButton"> -->
                                        <nz-input-group nzSearch>
                                            <input nz-input [(ngModel)]="registration.name" placeholder="长者姓名" formControlName="name" class="oldName" id="name" maxlength="10">
                                            <button nz-button nzType="primary" nzSearch (click)="showOldDialog()" class="chooseOldMan" *ngIf="registration.id=='' || registration.id == undefined">
                                                选择
                                            </button>
                                            <nz-form-explain *ngIf="validateForm.get('name').dirty && validateForm.get('name').errors">姓名不能为空
                                            </nz-form-explain>
                                        </nz-input-group>
                                        <!-- <ng-template #suffixIconButton>
                                          <button nz-button nzType="primary" nzSearch (click)="showOldDialog()" *ngIf="registration.id=='' || registration.id == undefined">
                                            选择
                                          </button>
                                        </ng-template> -->
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzRequired nzFor="sex">性别</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <nz-select [(ngModel)]="registration.sex" nzAllowClear nzPlaceHolder="请选择" formControlName="sex" id="sex">
                                            <nz-option nzValue="男" nzLabel="男"></nz-option>
                                            <nz-option nzValue="女" nzLabel="女"></nz-option>
                                        </nz-select>
                                        <nz-form-explain *ngIf="validateForm.get('sex').dirty && validateForm.get('sex').errors">性别不能为空</nz-form-explain>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzRequired nzFor="birthYearMonth">出生年月</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <nz-date-picker nzFormat="yyyy-MM-dd" [(ngModel)]="registration.birthYearMonth" formControlName="birthYearMonth" id="birthYearMonth" style="width: 100%"></nz-date-picker>
                                        <nz-form-explain *ngIf="validateForm.get('birthYearMonth').dirty && validateForm.get('birthYearMonth').errors">出生年月不能为空</nz-form-explain>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="cardno">身份证号码</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input [(ngModel)]="registration.cardno" formControlName="cardno" id="cardno" maxlength="18">
                                        <nz-form-explain *ngIf="validateForm.get('cardno').dirty && validateForm.get('cardno').errors">
                                            <ng-container *ngIf="validateForm.get('cardno').hasError('pattern')">
                                                请正确填写身份证号码
                                            </ng-container>
                                        </nz-form-explain>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="marriage">婚姻状况</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择" [(ngModel)]="registration.marriage" formControlName="marriage" id="marriage">
                                            <nz-option nzLabel="未婚" nzValue="未婚"></nz-option>
                                            <nz-option nzLabel="已婚" nzValue="已婚"></nz-option>
                                            <nz-option nzLabel="丧偶" nzValue="丧偶"></nz-option>
                                            <nz-option nzLabel="离婚" nzValue="离婚"></nz-option>
                                        </nz-select>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="nation">民族</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择" [(ngModel)]="registration.nation" formControlName="nation" id="nation">
                                            <nz-option nzLabel="汉族" nzValue="汉族"></nz-option>
                                            <nz-option nzLabel="蒙古族" nzValue="蒙古族"></nz-option>
                                            <nz-option nzLabel="回族" nzValue="回族"></nz-option>
                                            <nz-option nzLabel="藏族" nzValue="藏族"></nz-option>
                                            <nz-option nzLabel="维吾尔族" nzValue="维吾尔族"></nz-option>
                                            <nz-option nzLabel="苗族" nzValue="苗族"></nz-option>
                                            <nz-option nzLabel="彝族" nzValue="彝族"></nz-option>
                                            <nz-option nzLabel="壮族" nzValue="壮族"></nz-option>
                                            <nz-option nzLabel="布依族" nzValue="布依族"></nz-option>
                                            <nz-option nzLabel="朝鲜族" nzValue="朝鲜族"></nz-option>
                                            <nz-option nzLabel="满族" nzValue="满族"></nz-option>
                                            <nz-option nzLabel="侗族" nzValue="侗族"></nz-option>
                                            <nz-option nzLabel="瑶族" nzValue="瑶族"></nz-option>
                                            <nz-option nzLabel="白族" nzValue="白族"></nz-option>
                                            <nz-option nzLabel="土家族" nzValue="土家族"></nz-option>
                                            <nz-option nzLabel="哈尼族" nzValue="哈尼族"></nz-option>
                                            <nz-option nzLabel="哈萨克族" nzValue="哈萨克族"></nz-option>
                                            <nz-option nzLabel="傣族" nzValue="傣族"></nz-option>
                                            <nz-option nzLabel="黎族" nzValue="黎族"></nz-option>
                                            <nz-option nzLabel="傈僳族" nzValue="傈僳族"></nz-option>
                                            <nz-option nzLabel="佤族" nzValue="佤族"></nz-option>
                                            <nz-option nzLabel="畲族" nzValue="畲族"></nz-option>
                                            <nz-option nzLabel="高山族" nzValue="高山族"></nz-option>
                                            <nz-option nzLabel="拉祜族" nzValue="拉祜族"></nz-option>
                                            <nz-option nzLabel="水族" nzValue="水族"></nz-option>
                                            <nz-option nzLabel="东乡族" nzValue="东乡族"></nz-option>
                                            <nz-option nzLabel="纳西族" nzValue="纳西族"></nz-option>
                                            <nz-option nzLabel="景颇族" nzValue="景颇族"></nz-option>
                                            <nz-option nzLabel="柯尔克孜族" nzValue="柯尔克孜族"></nz-option>
                                            <nz-option nzLabel="土族" nzValue="土族"></nz-option>
                                            <nz-option nzLabel="达斡尔族" nzValue="达斡尔族"></nz-option>
                                            <nz-option nzLabel="仫佬族" nzValue="仫佬族"></nz-option>
                                            <nz-option nzLabel="羌族" nzValue="羌族"></nz-option>
                                            <nz-option nzLabel="布朗族" nzValue="布朗族"></nz-option>
                                            <nz-option nzLabel="撤拉族" nzValue="撤拉族"></nz-option>
                                            <nz-option nzLabel="毛难族" nzValue="毛难族"></nz-option>
                                            <nz-option nzLabel="仡佬族" nzValue="仡佬族"></nz-option>
                                            <nz-option nzLabel="锡伯族" nzValue="锡伯族"></nz-option>
                                            <nz-option nzLabel="阿昌族" nzValue="阿昌族"></nz-option>
                                            <nz-option nzLabel="普米族" nzValue="普米族"></nz-option>
                                            <nz-option nzLabel="塔吉克族" nzValue="塔吉克族"></nz-option>
                                            <nz-option nzLabel="怒族" nzValue="怒族"></nz-option>
                                            <nz-option nzLabel="乌孜别克族" nzValue="乌孜别克族"></nz-option>
                                            <nz-option nzLabel="俄罗斯族" nzValue="俄罗斯族"></nz-option>
                                            <nz-option nzLabel="鄂温克族" nzValue="鄂温克族"></nz-option>
                                            <nz-option nzLabel="德昂族" nzValue="德昂族"></nz-option>
                                            <nz-option nzLabel="保安族" nzValue="保安族"></nz-option>
                                            <nz-option nzLabel="裕固族" nzValue="裕固族"></nz-option>
                                            <nz-option nzLabel="京族" nzValue="京族"></nz-option>
                                            <nz-option nzLabel="塔塔尔族" nzValue="塔塔尔族"></nz-option>
                                            <nz-option nzLabel="独龙族" nzValue="独龙族"></nz-option>
                                            <nz-option nzLabel="鄂伦春族" nzValue="鄂伦春族"></nz-option>
                                            <nz-option nzLabel="赫哲族" nzValue="赫哲族"></nz-option>
                                            <nz-option nzLabel="门巴族" nzValue="门巴族"></nz-option>
                                            <nz-option nzLabel="珞巴族" nzValue="珞巴族"></nz-option>
                                            <nz-option nzLabel="基诺族" nzValue="基诺族"></nz-option>
                                            <nz-option nzLabel="其他" nzValue="其他"></nz-option>
                                            <nz-option nzLabel="外国血统中国籍人士" nzValue="外国血统中国籍人士"></nz-option>
                                        </nz-select>
                                        <nz-form-explain *ngIf="validateForm.get('nation').dirty && validateForm.get('nation').errors">民族不能为空</nz-form-explain>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="phone">联系电话</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input [(ngModel)]="registration.phone" formControlName="phone" id="phone" maxlength="15">
                                    </nz-form-control>
                                </nz-form-item>
                            </div>



                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="education">文化程度</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择" [(ngModel)]="registration.education" formControlName="education" id="education">
                                            <nz-option nzLabel="小学" nzValue="小学"></nz-option>
                                            <nz-option nzLabel="初中" nzValue="初中"></nz-option>
                                            <nz-option nzLabel="高中" nzValue="高中"></nz-option>
                                            <nz-option nzLabel="中专或技工学校" nzValue="中专或技工学校"></nz-option>
                                            <nz-option nzLabel="大专" nzValue="大专"></nz-option>
                                            <nz-option nzLabel="大学本科" nzValue="大学本科"></nz-option>
                                            <nz-option nzLabel="研究生" nzValue="研究生"></nz-option>
                                            <nz-option nzLabel="其他" nzValue="其他"></nz-option>
                                        </nz-select>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="political">政治面貌</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择" [(ngModel)]="registration.political" formControlName="political" id="political">
                                            <nz-option nzLabel="中国共产党党员" nzValue="中国共产党党员"></nz-option>
                                            <nz-option nzLabel="中国共产党预备党员" nzValue="中国共产党预备党员"></nz-option>
                                            <nz-option nzLabel="群众" nzValue="群众"></nz-option>
                                        </nz-select>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="occupation">职业</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择" [(ngModel)]="registration.occupation" formControlName="occupation" id="occupation">
                                            <nz-option nzLabel="干部" nzValue="干部"></nz-option>
                                            <nz-option nzLabel="工人" nzValue="工人"></nz-option>
                                            <nz-option nzLabel="军人" nzValue="军人"></nz-option>
                                            <nz-option nzLabel="农民" nzValue="农民"></nz-option>
                                            <nz-option nzLabel="商人" nzValue="商人"></nz-option>
                                            <nz-option nzLabel="职员" nzValue="职员"></nz-option>
                                            <nz-option nzLabel="其他" nzValue="其他"></nz-option>
                                        </nz-select>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="livingSituation">居住情况</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择" [(ngModel)]="registration.livingSituation" formControlName="livingSituation" id="livingSituation">
                                            <nz-option nzLabel="独居" nzValue="独居"></nz-option>
                                            <nz-option nzLabel="与配偶/伴侣居住" nzValue="与配偶/伴侣居住"></nz-option>
                                            <nz-option nzLabel="与子女居住" nzValue="与子女居住"></nz-option>
                                            <nz-option nzLabel="与父母居住" nzValue="与父母居住"></nz-option>
                                            <nz-option nzLabel="与兄弟姐妹居住" nzValue="与兄弟姐妹居住"></nz-option>
                                            <nz-option nzLabel="与其他亲属居住" nzValue="与其他亲属居住"></nz-option>
                                            <nz-option nzLabel="与非亲属关系的人居住" nzValue="与非亲属关系的人居住"></nz-option>
                                            <nz-option nzLabel="养老机构" nzValue="养老机构"></nz-option>
                                        </nz-select>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="financialResources">经济来源</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择" [(ngModel)]="registration.financialResources" formControlName="financialResources" id="financialResources">
                                            <nz-option nzLabel="退休金/养老金" nzValue="退休金/养老金"></nz-option>
                                            <nz-option nzLabel="子女补贴" nzValue="子女补贴"></nz-option>
                                            <nz-option nzLabel="亲友资助" nzValue="亲友资助"></nz-option>
                                            <nz-option nzLabel="其他补贴" nzValue="其他补贴"></nz-option>
                                        </nz-select>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>




                        </div>

                        <div nz-row [nzGutter]="24">
                            <div nz-col [nzSpan]="16">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="4" nzFor="medicalPayment" title="费用支付方式">费用支付方式</nz-form-label>
                                    <nz-form-control [nzSpan]="20">
                                        <nz-input-group nzCompact>
                                            <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择" [(ngModel)]="registration.medicalPayment" formControlName="medicalPayment" id="medicalPayment" [style.width]="registration.medicalPayment == '其他'?'40%':'100%'" (ngModelChange)="onMedicalPaymentChange($event)">
                                                <nz-option nzLabel="城镇职工基本医疗保险" nzValue="城镇职工基本医疗保险"></nz-option>
                                                <nz-option nzLabel="城镇居民基本医疗保险" nzValue="城镇居民基本医疗保险"></nz-option>
                                                <nz-option nzLabel="新型农村合作医疗" nzValue="新型农村合作医疗"></nz-option>
                                                <nz-option nzLabel="贫困救助" nzValue="贫困救助"></nz-option>
                                                <nz-option nzLabel="商业医疗保险" nzValue="商业医疗保险"></nz-option>
                                                <nz-option nzLabel="全公费" nzValue="全公费"></nz-option>
                                                <nz-option nzLabel="全自费" nzValue="全自费"></nz-option>
                                                <nz-option nzLabel="其他" nzValue="其他"></nz-option>
                                            </nz-select>
                                            <input nz-input [(ngModel)]="registration.medicalPaymentMemo" placeholder="请输入费用支付方式" style="width: 60%;" formControlName="medicalPaymentMemo" id="medicalPaymentMemo" *ngIf="registration.medicalPayment == '其他'" maxlength="10">
                                        </nz-input-group>
                                        <nz-form-explain *ngIf="validateForm.get('medicalPayment').dirty && validateForm.get('medicalPayment').errors">医疗费用支付方式不能为空</nz-form-explain>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="medicalCard">医保卡号</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input [(ngModel)]="registration.medicalCard" formControlName="medicalCard" id="medicalCard" maxlength="15">
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>
                        <div nz-row [nzGutter]="24">
                            <div nz-col [nzSpan]="16">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="4" nzFor="personnelSort">人员类别</nz-form-label>
                                    <nz-form-control [nzSpan]="20">
                                        <nz-input-group nzCompact>
                                            <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择" [(ngModel)]="registration.personnelSort" formControlName="personnelSort" id="personnelSort" [style.width]="registration.personnelSort == '三无老人' || registration.personnelSort == '五保老人'?'40%':'100%'"
                                                (ngModelChange)="onPersonnelSortChange($event)">
                                                <nz-option nzLabel="三无老人" nzValue="三无老人"></nz-option>
                                                <nz-option nzLabel="五保老人" nzValue="五保老人"></nz-option>
                                                <nz-option nzLabel="社会代养" nzValue="社会代养"></nz-option>
                                            </nz-select>
                                            <input nz-input [(ngModel)]="registration.personnelSortMemo" placeholder="请输入三无五保账号" style="width: 60%;" formControlName="personnelSortMemo" id="personnelSortMemo" *ngIf="registration.personnelSort == '三无老人' || registration.personnelSort == '五保老人'">
                                        </nz-input-group>
                                        <nz-form-explain *ngIf="validateForm.get('personnelSort').dirty && validateForm.get('personnelSort').errors">人员类别不能为空</nz-form-explain>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="cultivation">修养类型</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择" [(ngModel)]="registration.cultivation" formControlName="cultivation" id="cultivation">
                                            <nz-option nzLabel="政府供养" nzValue="政府供养"></nz-option>
                                            <nz-option nzLabel="社会寄养" nzValue="社会寄养"></nz-option>
                                        </nz-select>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>

                        </div>
                        <div nz-row [nzGutter]="24">
                            <div nz-col [nzSpan]="16">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="4" nzFor="religion">宗教信仰</nz-form-label>
                                    <nz-form-control [nzSpan]="20">
                                        <nz-input-group nzCompact>
                                            <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择" [(ngModel)]="registration.religion" formControlName="religion" id="religion" [style.width]="registration.religion == '有'?'30%':'100%'" (ngModelChange)="onReligionChange($event)">
                                                <nz-option nzLabel="无" nzValue="无"></nz-option>
                                                <nz-option nzLabel="有" nzValue="有"></nz-option>
                                            </nz-select>
                                            <input nz-input [(ngModel)]="registration.religionMemo" placeholder="请输入宗教信仰" style="width: 70%;" formControlName="religionMemo" id="religionMemo" *ngIf="registration.religion == '有'" maxlength="10">
                                        </nz-input-group>
                                        <nz-form-explain *ngIf="validateForm.get('religion').dirty && validateForm.get('religion').errors">宗教信仰不能为空</nz-form-explain>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>
                        <div nz-row [nzGutter]="24">
                            <div nz-col [nzSpan]="16">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="4" nzFor="nativePlace">户籍地</nz-form-label>
                                    <nz-form-control [nzSpan]="20">
                                        <input nz-input [(ngModel)]="registration.nativePlace" formControlName="nativePlace" id="nativePlace" maxlength="100">
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="16">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="4" nzFor="address">现住址</nz-form-label>
                                    <nz-form-control [nzSpan]="20">
                                        <input nz-input [(ngModel)]="registration.address" formControlName="address" id="address" maxlength="100">
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>
                        <div nz-row [nzGutter]="24">
                            <div nz-col [nzSpan]="16">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="4" nzFor="hopy">爱好或特长</nz-form-label>
                                    <nz-form-control [nzSpan]="20">
                                        <!-- <input nz-input [(ngModel)]="registration.hopy" formControlName="hopy" id="hopy" maxlength="20"> -->
                                        <textarea nz-input [(ngModel)]="registration.hopy" formControlName="hopy" id="hopy" [nzAutosize]="{ minRows: 2, maxRows: 6 }"></textarea>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>
                    </form>
                </nz-card>
                <nz-card nzType="inner" nzTitle="外出方式" class="marginBottom24">
                    <div class="outmodeClass">
                        <nz-checkbox-group [(ngModel)]="outmode"></nz-checkbox-group>
                    </div>
                </nz-card>
                <nz-card nzType="inner" nzTitle="经济供养人" class="marginBottom24" [nzLoading]="isPersonCardLoading">
                    <form nz-form>
                        <div nz-row [nzGutter]="24">
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="jjgyrName">姓名</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input [(ngModel)]="registration.EconomicProvider.name" name="jjgyrName" id="jjgyrName" maxlength="10">
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="jjgyrCardno">身份证号码</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input [(ngModel)]="registration.EconomicProvider.cardno" name="jjgyrCardno" id="jjgyrCardno" maxlength="18">
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="jjgyrAge">年龄</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input [(ngModel)]="registration.EconomicProvider.age" name="jjgyrAge" id="jjgyrAge" pattern="\d*" maxlength="3">
                                    </nz-form-control>
                                </nz-form-item>
                            </div>

                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="jjgyrRelationship">与托养人关系</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择" [(ngModel)]="registration.EconomicProvider.relationship" name="jjgyrRelationship" id="jjgyrRelationship">
                                            <nz-option nzLabel="户主/本人" nzValue="户主/本人"></nz-option>
                                            <nz-option nzLabel="配偶" nzValue="配偶"></nz-option>
                                            <nz-option nzLabel="子/婿" nzValue="子/婿"></nz-option>
                                            <nz-option nzLabel="女/媳" nzValue="女/媳"></nz-option>
                                            <nz-option nzLabel="孙子女/外孙子女" nzValue="孙子女/外孙子女"></nz-option>
                                            <nz-option nzLabel="父母/岳父母/公婆" nzValue="父母/岳父母/公婆"></nz-option>
                                            <nz-option nzLabel="祖父母/外祖父母" nzValue="祖父母/外祖父母"></nz-option>
                                            <nz-option nzLabel="兄弟姐妹" nzValue="兄弟姐妹"></nz-option>
                                            <nz-option nzLabel="其他" nzValue="其他"></nz-option>
                                        </nz-select>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="jjgyrPhone">联系电话</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input [(ngModel)]="registration.EconomicProvider.phone" name="jjgyrPhone" id="jjgyrPhone">
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>

                        <div nz-row [nzGutter]="24">
                            <div nz-col [nzSpan]="16">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="4" nzFor="jjgyrAddress">住址</nz-form-label>
                                    <nz-form-control [nzSpan]="20">
                                        <input nz-input [(ngModel)]="registration.EconomicProvider.address" name="jjgyrAddress" id="jjgyrAddress" maxlength="20">
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>
                    </form>
                </nz-card>

                <ng-template #extraTemplate1>
                    <button nz-button nzType="dashed" (click)="addField($event)">
                        <i class="anticon anticon-plus"></i> 添加成员</button>
                </ng-template>
                <nz-card nzType="inner" nzTitle="家庭成员" [nzExtra]="extraTemplate1" class="marginBottom24" [nzLoading]="isPersonCardLoading">
                    <nz-table [nzNoResult]="noResultArr" [nzHideOnSinglePage]="true">
                        <thead>
                            <tr>
                                <th>姓名</th>
                                <th>关系</th>
                                <th style="width:30%">单位或住址</th>
                                <th>联系电话</th>
                                <th>是否紧急联系人</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let data of registration.Contacts;let i = index;">
                                <td>
                                    <input nz-input [(ngModel)]="data.name" maxlength="10">
                                </td>
                                <td>
                                    <input nz-input [(ngModel)]="data.relationship" maxlength="10">
                                </td>
                                <td>
                                    <input nz-input [(ngModel)]="data.address" maxlength="20">
                                </td>
                                <td>
                                    <input nz-input [(ngModel)]="data.phone" maxlength="60">
                                </td>
                                <td>
                                    <label nz-checkbox [(ngModel)]="data.isEmergencyContact"></label>
                                </td>
                                <td>
                                    <a href="javascript:void(0)" class="colorF00" (click)="removeField(data, $event)">删除</a>
                                </td>
                            </tr>
                        </tbody>
                    </nz-table>
                </nz-card>
                <ng-template #noResultArr>
                    <!-- <div class="w100p disFlex justConC">
                      <button class="w70p" nz-button nzType="primary" nzGhost="true" (click)="addRevInfoObj()"><i nz-icon type="plus-circle"></i>新增回访或跟进信息</button>
                  </div> -->
                </ng-template>
                <div style="text-align:center;margin-top: 30px;">
                    <button class="saveBtn" nz-button nzType="primary" nzSize="large" (click)="onSavePersonalInfo()" [nzLoading]="savePersonalBtnLoading">保存</button>
                </div>
            </div>
        </nz-tab>

        <!-- 健康情况 Begin -->
        <nz-tab nzTitle="健康情况" [nzDisabled]="!registration.id">
            <div id="health">
                <form nz-form [formGroup]="healthForm">
                    <nz-card nzType="inner" nzTitle="" class="marginBottom24" [nzLoading]="isPersonCardLoading">
                        <div nz-row [nzGutter]="24">
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="fillDate">填表日期</nz-form-label>
                                    <nz-form-control [nzSpan]="16" id="fillDate">
                                        <nz-date-picker nzFormat="yyyy-MM-dd" formControlName="fillDate" style="width: 100%"></nz-date-picker>
                                        <!-- <nz-form-explain *ngIf="validateForm.get('birthYearMonth').dirty && validateForm.get('birthYearMonth').errors">出生年月不能为空</nz-form-explain> -->
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="inHosDate">入院时间</nz-form-label>
                                    <nz-form-control [nzSpan]="16" id="inHosDate">
                                        <nz-date-picker nzFormat="yyyy-MM-dd" formControlName="inHosDate" style="width: 100%"></nz-date-picker>
                                        <!-- <nz-form-explain *ngIf="validateForm.get('birthYearMonth').dirty && validateForm.get('birthYearMonth').errors">出生年月不能为空</nz-form-explain> -->
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="roomNum">房间号</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="roomNum" id="roomNum" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="name">姓名</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input readonly formControlName="name" id="name" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="sex">性别</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <nz-select nzAllowClear nzDisabled nzPlaceHolder="请选择" formControlName="sex" id="sex">
                                            <nz-option nzValue="男" nzLabel="男"></nz-option>
                                            <nz-option nzValue="女" nzLabel="女"></nz-option>
                                        </nz-select>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="age">年龄</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input readonly formControlName="age" id="age" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="birthYearMonth">出生日期</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <nz-date-picker nzFormat="yyyy-MM-dd" nzDisabled formControlName="birthYearMonth" id="birthYearMonth" style="width: 100%"></nz-date-picker>
                                        <!-- <nz-form-explain *ngIf="validateForm.get('birthYearMonth').dirty && validateForm.get('birthYearMonth').errors">出生年月不能为空</nz-form-explain> -->
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="phone">联系电话</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input readonly formControlName="phone" id="phone" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="16">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="4" nzFor="address">家庭住址</nz-form-label>
                                    <nz-form-control [nzSpan]="20">
                                        <input nz-input readonly formControlName="address" id="address">
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="16">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="4" nzFor="checkInMode">入住方式</nz-form-label>
                                    <nz-form-control [nzSpan]="20">
                                        <!-- <nz-checkbox-group formControlName="checkInMode" id="checkInMode" [(ngModel)]="checkOptionsOne"></nz-checkbox-group> -->
                                        <nz-radio-group formControlName="checkInMode" id="checkInMode">
                                            <label nz-radio nzValue="步行">步行</label>
                                            <label nz-radio nzValue="助行">助行</label>
                                            <label nz-radio nzValue="轮椅">轮椅</label>
                                            <label nz-radio nzValue="平车">平车</label>
                                        </nz-radio-group>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="16">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="4" nzFor="diet">饮食</nz-form-label>
                                    <nz-form-control [nzSpan]="20">
                                        <!-- <nz-checkbox-group formControlName="diet" id="diet" [(ngModel)]="checkOptionsOne1"></nz-checkbox-group> -->
                                        <nz-radio-group formControlName="diet" id="diet">
                                            <label nz-radio nzValue="普">普</label>
                                            <label nz-radio nzValue="半">半</label>
                                            <label nz-radio nzValue="流">流</label>
                                            <label nz-radio nzValue="特饮">特饮</label>
                                        </nz-radio-group>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="12">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="5" nzFor="historyOfPast">既往史</nz-form-label>
                                    <nz-form-control [nzSpan]="19">
                                        <textarea nz-input rows="3" placeholder="请输入既往史" formControlName="historyOfPast" id="historyOfPast"></textarea>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="12">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="5" nzFor="historyOfNow">现病史</nz-form-label>
                                    <nz-form-control [nzSpan]="19">
                                        <textarea nz-input rows="3" placeholder="请输入现病史" formControlName="historyOfNow" id="historyOfNow"></textarea>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="relieve">大小便</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="relieve" id="relieve" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="temperature">体温</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="temperature" id="temperature" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="pulse">脉博</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="pulse" id="pulse" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="breathing">呼吸</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="breathing" id="breathing" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="bloodPressure">血压</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="bloodPressure" id="bloodPressure" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="eyeAndVision">眼及视力</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="eyeAndVision" id="eyeAndVision" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="earAndListen">耳及视力</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="earAndListen" id="earAndListen" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="mouth">口腔</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="mouth" id="mouth" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="noise">鼻部</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="noise" id="noise" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="heart">心</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="heart" id="heart" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="liverSpleen">肝脾</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="liverSpleen" id="liverSpleen" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="lung">肺</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="lung" id="lung" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="limbsAndPelvis">四肢及骨盆</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="limbsAndPelvis" id="limbsAndPelvis" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="16">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="4" nzFor="phyCpndition">身体状况</nz-form-label>
                                    <nz-form-control [nzSpan]="20">
                                        <!-- <nz-checkbox-group formControlName="phyCpndition" id="phyCpndition" [(ngModel)]="checkOptionsOne3"></nz-checkbox-group> -->
                                        <nz-radio-group formControlName="phyCpndition" id="phyCpndition">
                                            <label nz-radio nzValue="自理">自理</label>
                                            <label nz-radio nzValue="半自理">半自理</label>
                                            <label nz-radio nzValue="半丧失生活能力">半丧失生活能力</label>
                                            <label nz-radio nzValue="完全丧失生活能力">完全丧失生活能力</label>
                                        </nz-radio-group>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="pain">皮肤</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="pain" id="pain" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>

                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="consciousness">思维意识</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="consciousness" id="consciousness" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="languageExpress">语言表达能力</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="languageExpress" id="languageExpress" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="mentalState">精神状况</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="mentalState" id="mentalState" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="8">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="8" nzFor="sleep">睡眠</nz-form-label>
                                    <nz-form-control [nzSpan]="16">
                                        <input nz-input formControlName="sleep" id="sleep" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>
                        <div nz-row [nzGutter]="24">
                            <div nz-col [nzSpan]="16">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="12" nzFor="hasPsyDrugsLastWeek">在过去七天内使用精神科药物（镇静剂、安眠药）</nz-form-label>
                                    <nz-form-control [nzSpan]="12">
                                        <nz-radio-group formControlName="hasPsyDrugsLastWeek" id="hasPsyDrugsLastWeek">
                                            <label nz-radio nzValue="true">是</label>
                                            <label nz-radio nzValue="false">否</label>
                                        </nz-radio-group>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col [nzSpan]="16">
                                <nz-form-item>
                                    <nz-form-label [nzSpan]="5" nzFor="isAllergic">对某些药物过敏</nz-form-label>
                                    <nz-form-control [nzSpan]="19">
                                        <nz-radio-group formControlName="isAllergic" id="isAllergic">
                                            <label nz-radio nzValue="是">是</label>
                                            <label nz-radio nzValue="否">否</label>
                                        </nz-radio-group>
                                        <nz-checkbox-group *ngIf="healthForm.get('isAllergic').value == '是'" [(ngModel)]="drugMemoDefault" [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                                        <input *ngIf="healthForm.get('isAllergic').value == '是' && drugMemoDefault[3]['checked']" nzPlaceholder="请输入其他过敏药物" nz-input formControlName="otherAllergicDrug" />
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>

                    </nz-card>

                    <ng-template #extraTemplate2>
                        <button nz-button nzType="dashed" (click)="addTakingInfoObj()">
                            <i class="anticon anticon-plus"></i> 添加药物</button>
                    </ng-template>

                    <nz-card nzType="inner" nzTitle="正在使用的药物" [nzExtra]="extraTemplate2" class="marginBottom24" [nzLoading]="isPersonCardLoading">
                        <nz-table [nzHideOnSinglePage]="true" [nzNoResult]="noResultArr" formArrayName="takingMeds">
                            <thead>
                                <tr>
                                    <th>序号</th>
                                    <th>药物的名称与剂量</th>
                                    <th>用法</th>
                                    <th>每次用量</th>
                                    <th>频率</th>
                                    <th>备注</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let x of healthForm.get('takingMeds')['controls']; let i=index;" [formGroupName]="i">
                                    <td class="p5 tac">{{i + 1}}</td>
                                    <td class="p5">
                                        <nz-select style="width: 100%;" nzMode="tags" [nzMaxMultipleCount]="1" nzPlaceHolder="请选择药物" formControlName="drugsAndDosage" (nzOnSearch)="onSearch($event)">
                                            <nz-option *ngFor="let o of listOfDrugs" [nzValue]="o.name" [nzLabel]="o.name"></nz-option>
                                        </nz-select>
                                        <!-- <nz-select style="width: 100%;" formControlName="drugsAndDosage" nzPlaceHolder="请选择药物" nzAllowClear nzShowSearch [nzServerSearch]="true" (nzOnSearch)="onSearch($event)">
                                            <ng-container *ngFor="let o of listOfDrugs">
                                                <nz-option *ngIf="!isLoading" [nzValue]="o.name" [nzLabel]="o.name"></nz-option>
                                            </ng-container>
                                            <nz-option *ngIf="isLoading" nzDisabled nzCustomContent>
                                                <i class="anticon anticon-loading anticon-spin loading-icon"></i> 加载数据中...
                                            </nz-option>
                                        </nz-select> -->
                                        <!-- <nz-form-item>
                                            <nz-form-label [nzSpan]="0" nzRequired></nz-form-label>
                                            <nz-form-control [nzSpan]="24">
                                                <input nz-input formControlName="drugsAndDosage" />
                                            </nz-form-control>
                                        </nz-form-item> -->
                                    </td>
                                    <td class="p5">
                                        <nz-select style="width: 100%; min-width: 150px;" nzMode="tags" [nzMaxMultipleCount]="1" nzPlaceHolder="请选择/输入用法" formControlName="usage">
                                            <nz-option *ngFor="let option of listOfUsages" [nzLabel]="option.label" [nzValue]="option.label"></nz-option>
                                        </nz-select>
                                        <!-- <nz-form-item>
                                            <nz-form-label [nzSpan]="0" nzRequired></nz-form-label>
                                            <nz-form-control [nzSpan]="24">
                                                <input nz-input formControlName="usage" />
                                            </nz-form-control>
                                        </nz-form-item> -->
                                    </td>
                                    <td class="p5">
                                        <nz-form-item>
                                            <nz-form-label [nzSpan]="0" nzRequired></nz-form-label>
                                            <nz-form-control [nzSpan]="24">
                                                <input nz-input formControlName="perUse" />
                                                <!-- <nz-form-explain class="colorF00" [hidden]="x.get('reviewResult').valid">请输入</nz-form-explain> -->
                                            </nz-form-control>
                                        </nz-form-item>
                                    </td>
                                    <td class="p5">
                                        <nz-select style="width: 100%; min-width: 150px;" nzMode="tags" [nzMaxMultipleCount]="1" nzPlaceHolder="请选择/输入频率" formControlName="frequency">
                                            <nz-option *ngFor="let option of listOfFrequency" [nzLabel]="option.label" [nzValue]="option.label"></nz-option>
                                        </nz-select>
                                        <!-- <nz-form-item>
                                            <nz-form-label [nzSpan]="0" nzRequired></nz-form-label>
                                            <nz-form-control [nzSpan]="24">
                                                <input nz-input formControlName="frequency" />
                                            </nz-form-control>
                                        </nz-form-item> -->
                                    </td>
                                    <td class="p5">
                                        <nz-form-item>
                                            <nz-form-label [nzSpan]="0" nzRequired></nz-form-label>
                                            <nz-form-control [nzSpan]="24">
                                                <input nz-input formControlName="comment" />
                                                <!-- <nz-form-explain class="colorF00" [hidden]="x.get('reviewResult').valid">请输入</nz-form-explain> -->
                                            </nz-form-control>
                                        </nz-form-item>
                                    </td>
                                    <td class="p5 tac">
                                        <a href="javascript:void(0)" class="colorF00" (click)="rmTakingInfoObj()">删除</a>
                                    </td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </nz-card>
                    <div nz-row>
                        <div nz-col [nzSpan]="16">
                            <nz-form-item>
                                <nz-form-label [nzSpan]="3">备注</nz-form-label>
                                <nz-form-control [nzSpan]="21">
                                    <textarea nz-input rows="3" placeholder="请输入备注信息" formControlName="healthComment"></textarea>
                                </nz-form-control>
                            </nz-form-item>
                        </div>
                    </div>
                    <ng-template #noResultArr></ng-template>
                    <!-- 健康情况 End -->

                    <div style="text-align:center;margin-top: 30px;">
                        <button class="saveBtn" nz-button nzType="primary" nzSize="large" (click)="saveHealthForm()" [nzLoading]="saveHealthBtnLoading">保存</button>
                    </div>
                </form>
            </div>
        </nz-tab>
    </nz-tabset>
</nz-card>


<!-- 姓名检索弹出框 Begin -->
<ng-template #extraTemplate>
    <button nz-button nzType="default" (click)="back()">返回</button>
</ng-template>
<nz-modal [nzFooter]="null " [(nzVisible)]="isShowOldDialog " [nzTitle]="oldModalTitle " [nzContent]="oldModalContent" (nzOnCancel)="cancelOldDialog() " [nzStyle]="dialogStyle" nzWidth="800">
    <ng-template #oldModalTitle>请选择长者</ng-template>

    <ng-template #oldModalContent>
        <nz-input-group nzSearch [nzSuffix]="suffixIconButton" style="margin-bottom: 15px">
            <input type="text " nz-input placeholder="按长者姓名检索 " [(ngModel)]="searchOldName">
        </nz-input-group>
        <ng-template #suffixIconButton>
            <button nz-button nzType="primary" nzSearch (click)="loadingOldList(true)">
                <i class="anticon anticon-search"></i>
            </button>
        </ng-template>

        <nz-table #basicTable [nzData]="oldDataArray" [nzShowPagination]="true" [nzBordered]="'true'" [nzSize]="'middle'" [nzLoading]="isOldTableLoading" [nzTotal]="oldResultData.totalElements" [(nzPageIndex)]="oldQueryParams.page" [(nzPageSize)]="oldQueryParams.size"
            (nzPageIndexChange)="loadingOldList()" (nzPageSizeChange)="loadingOldList(true)" nzShowSizeChanger="false" nzFrontPagination="false">
            <thead>
                <tr>
                    <th class="tac ftwB">姓名</th>
                    <th class="tac ftwB">性别</th>
                    <th class="tac ftwB">出生年月</th>
                    <th class="tac ftwB">联系电话</th>
                    <th class="tac ftwB">咨询日期</th>
                    <th class="tac ftwB">预约方式</th>
                    <th class="tac ftwB">预计到访</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let x of basicTable.data; let idx = index;" (click)="chooseOld(x)">
                    <td class="tac">{{x.name}}</td>
                    <td class="tac">{{x.sex}}</td>
                    <td class="tac">{{x.birthYearMonth}}</td>
                    <td class="tac">{{x.phone}}</td>
                    <td class="tac">{{x.consultingTime | date:'yyyy-MM-dd'}}</td>
                    <td class="tac">
                        <span *ngIf="x.consultingType == 1">微信咨询</span>
                        <span *ngIf="x.consultingType == 2">电话咨询</span>
                        <span *ngIf="x.consultingType == 3">来院咨询</span>
                    </td>
                    <td class="tac">{{x.estimatedTime | date:'yyyy-MM-dd'}}</td>
                </tr>
            </tbody>
        </nz-table>
    </ng-template>
</nz-modal>
<!-- 姓名检索弹出框 End -->