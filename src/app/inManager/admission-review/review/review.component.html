<ng-template #extraTemplate>
  <button nz-button nzType="default" (click)="back()">返回</button>
</ng-template>
<nz-card style="width: 100%;" nzTitle="入院审核详情" [nzExtra]="extraTemplate">

  <div>
    <nz-card nzType="inner" nzTitle="托养人" class="marginBottom24" [nzLoading]="isLoadingData">
      <form nz-form [formGroup]="validateForm">
        <div nz-row [nzGutter]="8">
          <div nz-col [nzSpan]="8">
            <nz-form-item>
              <nz-form-label [nzSpan]="8" nzRequired nzFor="name">姓名</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <input nz-input [(ngModel)]="review.name" formControlName="name" id="name" disabled class="ant-input-review">
                <nz-form-explain *ngIf="validateForm.get('name').dirty && validateForm.get('name').errors">姓名不能为空</nz-form-explain>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="8">
            <nz-form-item>
              <nz-form-label [nzSpan]="8" nzRequired nzFor="sex">性别</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <nz-select [(ngModel)]="review.sex" nzAllowClear nzPlaceHolder="请选择" formControlName="sex" id="sex" nzDisabled>
                  <nz-option nzValue="男" nzLabel="男"></nz-option>
                  <nz-option nzValue="女" nzLabel="女"></nz-option>
                </nz-select>
                <nz-form-explain *ngIf="validateForm.get('sex').dirty && validateForm.get('sex').errors">性别不能为空</nz-form-explain>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="8">
            <nz-form-item>
              <nz-form-label [nzSpan]="8" nzRequired nzFor="birthYearMonth">出生年月</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <nz-date-picker nzFormat="yyyy-MM-dd" [(ngModel)]="review.birthYearMonth" formControlName="birthYearMonth" id="birthYearMonth"
                  style="width: 100%" nzDisabled></nz-date-picker>
                <nz-form-explain *ngIf="validateForm.get('birthYearMonth').dirty && validateForm.get('birthYearMonth').errors">出生年月不能为空</nz-form-explain>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="8">
            <nz-form-item>
              <nz-form-label [nzSpan]="8"  nzFor="nation">民族</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择" [(ngModel)]="review.nation" formControlName="nation" id="nation" nzDisabled>
                  <nz-option nzLabel="汉族" nzValue="汉族"></nz-option>
                  <nz-option nzLabel="蒙古族" nzValue="蒙古族"></nz-option>
                  <nz-option nzLabel="回族" nzValue="回族"></nz-option>
                  <nz-option nzLabel="藏族" nzValue="藏族"></nz-option>
                  <nz-option nzLabel="维吾尔族" nzValue="维吾尔族"></nz-option>
                  <nz-option nzLabel="苗族" nzValue="苗族"></nz-option>
                  <nz-option nzLabel="彝族" nzValue="彝族"></nz-option>
                  <nz-option nzLabel="壮族" nzValue="壮族"></nz-option>
                  <nz-option nzLabel="布依族" nzValue="布依族"></nz-option>
                  <nz-option nzLabel="朝鲜族" nzValue="朝鲜族"></nz-option>
                  <nz-option nzLabel="满族" nzValue="满族"></nz-option>
                  <nz-option nzLabel="侗族" nzValue="侗族"></nz-option>
                  <nz-option nzLabel="瑶族" nzValue="瑶族"></nz-option>
                  <nz-option nzLabel="白族" nzValue="白族"></nz-option>
                  <nz-option nzLabel="土家族" nzValue="土家族"></nz-option>
                  <nz-option nzLabel="哈尼族" nzValue="哈尼族"></nz-option>
                  <nz-option nzLabel="哈萨克族" nzValue="哈萨克族"></nz-option>
                  <nz-option nzLabel="傣族" nzValue="傣族"></nz-option>
                  <nz-option nzLabel="黎族" nzValue="黎族"></nz-option>
                  <nz-option nzLabel="傈僳族" nzValue="傈僳族"></nz-option>
                  <nz-option nzLabel="佤族" nzValue="佤族"></nz-option>
                  <nz-option nzLabel="畲族" nzValue="畲族"></nz-option>
                  <nz-option nzLabel="高山族" nzValue="高山族"></nz-option>
                  <nz-option nzLabel="拉祜族" nzValue="拉祜族"></nz-option>
                  <nz-option nzLabel="水族" nzValue="水族"></nz-option>
                  <nz-option nzLabel="东乡族" nzValue="东乡族"></nz-option>
                  <nz-option nzLabel="纳西族" nzValue="纳西族"></nz-option>
                  <nz-option nzLabel="景颇族" nzValue="景颇族"></nz-option>
                  <nz-option nzLabel="柯尔克孜族" nzValue="柯尔克孜族"></nz-option>
                  <nz-option nzLabel="土族" nzValue="土族"></nz-option>
                  <nz-option nzLabel="达斡尔族" nzValue="达斡尔族"></nz-option>
                  <nz-option nzLabel="仫佬族" nzValue="仫佬族"></nz-option>
                  <nz-option nzLabel="羌族" nzValue="羌族"></nz-option>
                  <nz-option nzLabel="布朗族" nzValue="布朗族"></nz-option>
                  <nz-option nzLabel="撤拉族" nzValue="撤拉族"></nz-option>
                  <nz-option nzLabel="毛难族" nzValue="毛难族"></nz-option>
                  <nz-option nzLabel="仡佬族" nzValue="仡佬族"></nz-option>
                  <nz-option nzLabel="锡伯族" nzValue="锡伯族"></nz-option>
                  <nz-option nzLabel="阿昌族" nzValue="阿昌族"></nz-option>
                  <nz-option nzLabel="普米族" nzValue="普米族"></nz-option>
                  <nz-option nzLabel="塔吉克族" nzValue="塔吉克族"></nz-option>
                  <nz-option nzLabel="怒族" nzValue="怒族"></nz-option>
                  <nz-option nzLabel="乌孜别克族" nzValue="乌孜别克族"></nz-option>
                  <nz-option nzLabel="俄罗斯族" nzValue="俄罗斯族"></nz-option>
                  <nz-option nzLabel="鄂温克族" nzValue="鄂温克族"></nz-option>
                  <nz-option nzLabel="德昂族" nzValue="德昂族"></nz-option>
                  <nz-option nzLabel="保安族" nzValue="保安族"></nz-option>
                  <nz-option nzLabel="裕固族" nzValue="裕固族"></nz-option>
                  <nz-option nzLabel="京族" nzValue="京族"></nz-option>
                  <nz-option nzLabel="塔塔尔族" nzValue="塔塔尔族"></nz-option>
                  <nz-option nzLabel="独龙族" nzValue="独龙族"></nz-option>
                  <nz-option nzLabel="鄂伦春族" nzValue="鄂伦春族"></nz-option>
                  <nz-option nzLabel="赫哲族" nzValue="赫哲族"></nz-option>
                  <nz-option nzLabel="门巴族" nzValue="门巴族"></nz-option>
                  <nz-option nzLabel="珞巴族" nzValue="珞巴族"></nz-option>
                  <nz-option nzLabel="基诺族" nzValue="基诺族"></nz-option>
                  <nz-option nzLabel="其他" nzValue="其他"></nz-option>
                  <nz-option nzLabel="外国血统中国籍人士" nzValue="外国血统中国籍人士"></nz-option>
                </nz-select>
                <nz-form-explain *ngIf="validateForm.get('nation').dirty && validateForm.get('nation').errors">民族不能为空</nz-form-explain>
              </nz-form-control>
            </nz-form-item>
          </div>
         
          <div nz-col [nzSpan]="8">
            <nz-form-item>
              <nz-form-label [nzSpan]="8" nzFor="cardno">身份证号码</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <input nz-input [(ngModel)]="review.cardno" formControlName="cardno" id="cardno" disabled class="ant-input-review">
                <nz-form-explain *ngIf="validateForm.get('cardno').dirty && validateForm.get('cardno').errors">
                  <ng-container *ngIf="validateForm.get('cardno').hasError('pattern')">
                    请正确填写身份证号码
                  </ng-container>
                </nz-form-explain>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="8">
            <nz-form-item>
              <nz-form-label [nzSpan]="8"  nzFor="personnelSort">人员类别</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <nz-input-group nzCompact>
                  <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择" [(ngModel)]="review.personnelSort" formControlName="personnelSort"
                    id="personnelSort" [style.width]="review.personnelSort == '三无老人' || review.personnelSort == '五保老人'?'30%':'100%'"
                    (ngModelChange)="onPersonnelSortChange($event)" nzDisabled>
                    <nz-option nzLabel="三无老人" nzValue="三无老人"></nz-option>
                    <nz-option nzLabel="五保老人" nzValue="五保老人"></nz-option>
                    <nz-option nzLabel="社会代养" nzValue="社会代养"></nz-option>
                  </nz-select>
                  <input nz-input [(ngModel)]="review.personnelSortMemo" placeholder="请输入三无五保账号" style="width: 70%;" formControlName="personnelSortMemo"
                    id="personnelSortMemo" *ngIf="review.personnelSort == '三无老人' || review.personnelSort == '五保老人'" disabled>
                </nz-input-group>
                <nz-form-explain *ngIf="validateForm.get('personnelSort').dirty && validateForm.get('personnelSort').errors">人员类别不能为空</nz-form-explain>
              </nz-form-control>
            </nz-form-item>
          </div>
          <!-- <div nz-col [nzSpan]="8">
            <nz-form-item>
              <nz-form-label [nzSpan]="8" nzRequired nzFor="laborAbility">劳动能力</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <nz-input-group nzCompact>
                  <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择" [(ngModel)]="review.laborAbility" formControlName="laborAbility"
                    id="laborAbility" style="width: 100%;">
                    <nz-option nzLabel="有劳动能力" nzValue="有劳动能力"></nz-option>
                    <nz-option nzLabel="部分丧失劳动能力" nzValue="部分丧失劳动能力"></nz-option>
                    <nz-option nzLabel="完全丧失劳动能力" nzValue="完全丧失劳动能力"></nz-option>
                    <nz-option nzLabel="其他" nzValue="其他"></nz-option>
                  </nz-select>
                </nz-input-group>
                <nz-form-explain *ngIf="validateForm.get('laborAbility').dirty && validateForm.get('laborAbility').errors">劳动能力不能为空</nz-form-explain>
              </nz-form-control>
            </nz-form-item>
          </div> -->
        </div>
      </form>
    </nz-card>
    <nz-card nzType="inner" nzTitle="经济供养人" class="marginBottom24" [nzLoading]="isLoadingData">
      <form nz-form>
        <div nz-row [nzGutter]="24">
          <div nz-col [nzSpan]="8">
            <nz-form-item>
              <nz-form-label [nzSpan]="8" nzFor="epName">姓名</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <input nz-input [(ngModel)]="review.epName" name="epName" id="epName" disabled class="ant-input-review" >
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="8">
            <nz-form-item>
              <nz-form-label [nzSpan]="8" nzFor="epCardno">身份证号码</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <input nz-input [(ngModel)]="review.epCardno" name="epCardno" id="epCardno" disabled class="ant-input-review">
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="8">
            <nz-form-item>
              <nz-form-label [nzSpan]="8" nzFor="epAge">年龄</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <input nz-input [(ngModel)]="review.epAge" name="epAge" id="epAge" disabled class="ant-input-review">
              </nz-form-control>
            </nz-form-item>
          </div>
         
          <div nz-col [nzSpan]="8">
            <nz-form-item>
              <nz-form-label [nzSpan]="8" nzFor="epRelationship">与托养人关系</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择" [(ngModel)]="review.epRelationship" name="epRelationship" id="epRelationship" nzDisabled>
                  <nz-option nzLabel="户主/本人" nzValue="户主/本人"></nz-option>
                  <nz-option nzLabel="配偶" nzValue="配偶"></nz-option>
                  <nz-option nzLabel="子/婿" nzValue="子/婿"></nz-option>
                  <nz-option nzLabel="女/媳" nzValue="女/媳"></nz-option>
                  <nz-option nzLabel="孙子女/外孙子女" nzValue="孙子女/外孙子女"></nz-option>
                  <nz-option nzLabel="父母/岳父母/公婆" nzValue="父母/岳父母/公婆"></nz-option>
                  <nz-option nzLabel="祖父母/外祖父母" nzValue="祖父母/外祖父母"></nz-option>
                  <nz-option nzLabel="兄弟姐妹" nzValue="兄弟姐妹"></nz-option>
                  <nz-option nzLabel="其他" nzValue="其他"></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="8">
            <nz-form-item>
              <nz-form-label [nzSpan]="8" nzFor="epPhone">联系电话</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <input nz-input [(ngModel)]="review.epPhone" name="epPhone" id="epPhone" disabled class="ant-input-review">
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>

        <div nz-row [nzGutter]="24">
            <div nz-col [nzSpan]="16">
                <nz-form-item>
                  <nz-form-label [nzSpan]="4" nzFor="epAddress">住址</nz-form-label>
                  <nz-form-control [nzSpan]="20">
                    <input nz-input [(ngModel)]="review.epAddress" name="epAddress" id="epAddress" disabled class="ant-input-review">
                  </nz-form-control>
                </nz-form-item>
              </div>
        </div>

      </form>
    </nz-card>
    <nz-card nzType="inner" nzTitle="入住登记" class="marginBottom24" [nzLoading]="isLoadingData">
      <form nz-form [formGroup]="ruzhuForm">
        <div nz-row [nzGutter]="8">
          <div nz-col [nzSpan]="8">
            <nz-form-item>
              <nz-form-label [nzSpan]="8" nzRequired nzFor="bed_id">床位号</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <nz-tree-select style="width: 100%;" nzPlaceHolder="{{(review?.bed_name ? review?.bed_name : '请选择')}}" [nzDefaultExpandedKeys]="expandKeys" [nzDropdownMatchSelectWidth]="true"
                  [nzDropdownStyle]="{ 'max-height': '300px' }" [(ngModel)]="review.bed_id" [nzNodes]="nodes" [nzAsyncData]="true"
                  [nzShowSearch]="true" formControlName="bed_id" id="bed_id">
                </nz-tree-select>
                <nz-form-explain *ngIf="ruzhuForm.get('bed_id').dirty && ruzhuForm.get('bed_id').errors">床位号不能为空</nz-form-explain>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="8">
              <nz-form-item>
                <nz-form-label [nzSpan]="8" nzRequired nzFor="careLevelCase_id">护理等级</nz-form-label>
                <nz-form-control [nzSpan]="16">
                  <nz-input-group nzCompact>
                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择" [(ngModel)]="review.careLevelCase_id" formControlName="careLevelCase_id"
                      id="careLevelCase_id" style="width: 100%;">
                      <nz-option *ngFor="let data of nursingGradeList" [nzLabel]="data.levelName" [nzValue]="data.id"></nz-option>
                    </nz-select>
                  </nz-input-group>
                  <nz-form-explain *ngIf="ruzhuForm.get('careLevelCase_id').dirty && ruzhuForm.get('careLevelCase_id').errors">护理类型不能为空</nz-form-explain>
                </nz-form-control>
              </nz-form-item>
            </div>
          <div nz-col [nzSpan]="8" [hidden]="true">
            <nz-form-item>
              <nz-form-label [nzSpan]="8" nzFor="isTry">试入住安排</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <nz-radio-group [(ngModel)]="review.isTry" formControlName="isTry" id="isTry">
                  <label nz-radio nzValue="是">是</label>
                  <label nz-radio nzValue="否">否</label>
                </nz-radio-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="8">
            <nz-form-item>
              <nz-form-label [nzSpan]="8" nzFor="inDate">入住时间</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <nz-date-picker nzFormat="yyyy-MM-dd" [(ngModel)]="review.inDate" formControlName="inDate" id="inDate" style="width: 100%"></nz-date-picker>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>
      </form>
    </nz-card>
    <nz-card nzType="inner" nzTitle="收费情况" class="marginBottom24" [nzLoading]="isLoadingData">
      <div nz-row [nzGutter]="8">
        <div nz-col [nzSpan]="8">
          <nz-form-item>
            <nz-form-label [nzSpan]="8" nzFor="nursingFee">护理费</nz-form-label>
            <nz-form-control [nzSpan]="16">
              <input nz-input [(ngModel)]="review.nursingFee" name="nursingFee" id="nursingFee">
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="8">
          <nz-form-item>
            <nz-form-label [nzSpan]="8" nzFor="bedFee">床位费</nz-form-label>
            <nz-form-control [nzSpan]="16">
              <input nz-input [(ngModel)]="review.bedFee" name="bedFee" id="bedFee">
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
      <div nz-row [nzGutter]="8">
        <div nz-col [nzSpan]="8">
          <nz-form-item>
            <nz-form-label [nzSpan]="8" nzFor="foodFee">伙食费</nz-form-label>
            <nz-form-control [nzSpan]="16">
              <input nz-input [(ngModel)]="review.foodFee" name="foodFee" id="foodFee">
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="8">
          <nz-form-item>
            <nz-form-label [nzSpan]="8" nzFor="otherFee">其他费用</nz-form-label>
            <nz-form-control [nzSpan]="16">
              <input nz-input [(ngModel)]="review.otherFee" name="otherFee" id="otherFee">
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
      <div nz-row [nzGutter]="8">
        <div nz-col [nzSpan]="24">
          <nz-form-item>
            <nz-form-label [nzSpan]="2" nzFor="isBilling">是否开票</nz-form-label>
            <nz-form-control [nzSpan]="20">
              <nz-radio-group [(ngModel)]="review.isBilling" name="isBilling" id="isBilling" (ngModelChange)="isBilling()">
                <label nz-radio nzValue="是">是</label>
                <label nz-radio nzValue="否">否</label>
              </nz-radio-group>
              <span  *ngIf="review.isBilling=='是'">
                <nz-radio-group [(ngModel)]="invoiceType">
                  <label nz-radio nzValue="个人">个人</label>
                  <label nz-radio nzValue="公司">公司</label>
                </nz-radio-group>
                <input *ngIf="invoiceType=='个人'"  placeholder="姓名" nz-input [(ngModel)]="Gename" nzSize="default" class="inputw">
                <input *ngIf="invoiceType=='公司'"  placeholder="公司名称" nz-input [(ngModel)]="Gname" nzSize="default" class="inputw">
                <input *ngIf="invoiceType=='公司'"  placeholder="公司税号" nz-input [(ngModel)]="DutyParagraph" nzSize="default" class="inputw">
              </span>
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
    </nz-card>
    <div style="text-align:center;margin-top: 30px;">
        <button class="saveBtn" nz-button nzType="primary" nzSize="large" (click)="onSavePersonalInfo()" [nzLoading]="isSaveBtnLoading">保存</button>
      </div>
  </div>
</nz-card>
